<!DOCTYPE html>
<html>
<title>TVT</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-teal.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<meta name="apple-mobile-web-app-capable" content="yes" /> 
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
<link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
<link rel="stylesheet" type="text/css"	href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
<link rel="stylesheet" href="css/style.css">
<style>
body {font-family: "Roboto", sans-serif}
.w3-bar-block .w3-bar-item {
  padding: 16px;
  font-weight: bold;
}
.checkbox-xl .custom-control-label::before, 
.checkbox-xl .custom-control-label::after {
  padding-left: 10px;
  width: 1.85rem;
  height: 1.85rem;
}

.checkbox-xl .custom-control-label {
  padding-top: 10px;
  padding-left: 10px;
}
.checked {
  color: white;
}
  .unchecked {
  color: gray;
}
.CongDoan{
  color: blue;
}
.BigStar{color: white}

     
table.dataTable td{
    vertical-align: middle;
    }


#table-TimXe .DangSuaChua{
   color: #00ff00;
}
#table-TimXe .ChoSuaChua{
   color: yellow;
}
#table-TimXe .ChuaSuaChua{
   color: pink;
}
#table-TimXe .DungSuaChua{
   color: red;
}

      
table thead {background-color:#1155cc;
  font-size: 10px;}
  
  

   input:invalid {
  border-color: red;
}
input:valid {
  background: lightgreen;
}
select:valid {
  background: lightgreen;
}
  select:invalid {
  border-color: red;
}
</style>
<body>
<nav class="w3-sidebar w3-bar-block w3-collapse w3-animate-left w3-card" style="z-index:3;width:150px;" id="mySidebar">
  <a class="w3-bar-item w3-button w3-border-bottom w3-large" href="main.html">Toyota TVT</a>
  <a class="w3-bar-item w3-button w3-hide-large w3-large" href="javascript:void(0)" onclick="w3_close()">Close <i class="fa fa-remove"></i></a>
  <a class="w3-bar-item w3-button w3-teal" href="Body.html" id="name">Home</a>
  <a class="w3-bar-item w3-button" href="LeTan.html">Lễ Tân</a>
  <a class="w3-bar-item w3-button" href="CoVan.html">Cố Vấn</a>
  <a class="w3-bar-item w3-button" href="DatHen.html">Đặt Hẹn</a>
  <a class="w3-bar-item w3-button" href="EMSCC.html">EM GJ</a>
  <div>
    <a class="w3-bar-item w3-button" onclick="myAccordion('demo')" href="javascript:void(0)">Tính Năng <i class="fa fa-caret-down"></i></a>
    <div id="demo" class="w3-hide">
      <a class="w3-bar-item w3-button" >
      <button type="button"id="bnt-DangKyshow" onclick="showDangKy()" class="btn btn-success" >Đăng Ký</button> </a>
      <a class="w3-bar-item w3-button" >
        <select required class="form-control"  id="LOAIBANGTD" onchange=" BANGTIENDO(this.value)" >
        <option value="Xưởng">Xưởng</option>'
        <option value="Đồng">Đồng</option>'
        <option value="Thiên">Thiên</option>'
        <option value="Đình">Đình</option>'
        <option value="Pass">Pass</option>'
    </select> </a>
      
     
    </div>
  </div>
</nav>
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" id="myOverlay"></div>
<div class="w3-main" style="margin-left:150px;">
<div id="myTop" class="w3-container w3-top w3-theme w3-large">
  <p><i class="fa fa-bars w3-button w3-teal w3-hide-large w3-xlarge" onclick="w3_open()"></i>
  <span id="myIntro" class="w3-hide">Dịch Vụ Toyota Vũng Tàu</span></p>
</div>
<header class="w3-container w3-theme" style="padding:13px 32px">
  <h1 class="w3-xlarge">Đồng Sơn</h1>
</header>
<div class="w3-container" id="TrangDangNhap" style="padding:13px">
  
       
    
     <div class="card pmd-card"style="background-color:black">   
      <div class="pmd-tabs">
          <ul class="nav nav-tabs" role="tablist">
              <li class="nav-item"><a class="nav-link " href="#TienDo" aria-controls="home" role="tab" data-toggle="tab">Danh Sách</a></li>
              <li class="nav-item"><a class="nav-link active" href="#Timeline" aria-controls="about" role="tab" data-toggle="tab"ondblclick="loadData ()">Tiến Độ</a></li>
              <li class="nav-item" disabled><a class="nav-link "   style="color:black;background-color: pink" id="HideChoSC" disabled>Chờ SC</a></li>
              <li class="nav-item" disabled><a class="nav-link "   style="color:black;background-color: greenyellow" disabled>Đang SC</a></li>
              <li class="nav-item" disabled><a class="nav-link "   style="color:black;background-color: red" disabled>Dừng SC</a></li>
              <li class="nav-item" disabled><a class="nav-link "   style="color:black;background-color: gold" disabled>Đã SC</a></li>
              <li class="nav-item"><div class="custom-control custom-checkbox checkbox-xl">
                <input type="checkbox" class="custom-control-input" id="checkbox-3"  onchange="loadData ()">
                <label class="custom-control-label" for="checkbox-3"style="color:white">Đã HT</label>
              </div></li>
              <h2 id="tieude"class="head col-3" style="color:#0072B5"></h2>
                
              <input type="text"  id="selection" list="BienSoXeList" placeholder="Seach!!" onselect="this.value = ''" onchange="loadData ()"  style="background-color:gray">
            </ul>
      </div>
       <div class="tab-content">
          <div role="tabpanel" class="tab-pane " id="TienDo"> 
            <table id="table-TimXe"  class="highlight" class=" table table-dark  table-sm table-hover  row-border"style="font-weight:bold ;width:100%;background-color:black" onclick = "clickTableTiepNhan()">
                <thead>
                  <tr>
                    <th style=" width: 20%;">Biển Số</th>
                    <th style=" width: 5%;"><select class="form" id="CoVanFilter" style="width:100%;background-color:#1155cc"onChange = "changeCoVan()">
                      <option value >Cố Vấn</option>
                      </select>
                    </th>
                    <th style=" width: 5%;"><select  id="NhomFilter" style="width:100%;background-color:#1155cc"onChange = "changeNhom()">
                      <option value>Nhóm</option>
                      <option value="Thành">Thành</option>
                      <option value="Đình" >Đình</option>
                      <option value="Thiên">Thiên</option>
                      <option value="Đồng">Đồng</option>
                      </select></th>
                        <th  style=" width: 5%;"  >KTV</th>
                         <th  style=" width: 5%;"  >TGTX</th>
                          <th  style=" width: 5%;"  >HGX</th>
                           <th  style=" width: 5%;"  >GKT</th>
                    <th ><select id="GiaoXeTheoXe"  onchange="checkTimXe()"style=";width:100%;background-color:#1155cc">
                          <option >Tiến Độ Công Đoạn</option>
                          <option value="Oki">Tiến Độ Giao Xe</option>
                      </select>
                    </th>
                    <th style=" width: 10%;" >Công Đoạn</th>
                  </tr>
                </thead>
              <tbody id="table-body-Tim-xe"  >
              </tbody>
            </table>
          </div>
           <div role="tabpanel" class="tab-pane active" id="Timeline">
             <div  id="mytimeline"></div>
          </div> 
            
       </div>
   </div><datalist id = "BienSoXeList">

   </datalist>
   <!--modalDS-->
   <div class="modal fade" id="ModalDongSon" tabindex="-1" data-keyboard="false" data-backdrop="static" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h3 style="float: right" id="biensods"></h3>
   
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <form autocomplete="off" id="FormDS">
               <div id="alert"><div class='alert alert-success'>Wellcome !!</div></div>
             <div class="btn-group" role="group"  id="ButEnd">
                  </div>
          <div class="form-group col-6"style="display:none">
                  <label for="MaSo">Mã Số</label>
                  <input required class="form-control"  id="MaSo"  name="MaSo" disabled>
                </div> 
             <div class="form-row">
                  <div class=" form-group col-6 "  >
                    <label for="NhomSC">Nhóm Sơn</label>
                    <select id="NhomSon" class="form-control"  onChange="NhomSonChange()">
                    <option ></option>'
                    
                    <option value="Đình">Đình</option>'
                    <option value="Thiên">Thiên</option>'
                    </select>
                  </div>
                  <div class=" form-group  col-6">
                    <label for="KTVDS2" class="control-label">Kỹ Thuật Viên</label>
                    <select    class="form-control"id="KTVDS1" required>
                      <option></option>
                    </select>
                  </div>
                   
                  <div class=" form-group col-4" > 
                    <label for="propeller-select">Công Đoạn</label>
                    <select id="CongDoanDongSon" class="form-control" onchange="ChangCongDoan(this.value)" >
                    <option ></option>'
                    <option value="Chờ SC">Chờ SC</option>'
                    <option value="Đồng">Đồng</option>'
                    <option value="Nền">Nền</option>'
                    <option value="Sơn">Sơn</option>'
                    <option value="Pass">Pass</option>'
                    <option value="Lắp Ráp">Lắp Ráp</option>'
                    <option value="QC">QC</option>'
                    </select>
                  </div>
                  <div class="form-group col-4">
                    <label for="PhongSon">Phòng Sơn</label>
                    <select id="PhongSon" required class="form-control" onChange="PhongSonChange()">
                      <option ></option>
                      <option value = "Phòng Sơn 1">Phòng Sơn 1</option>
                      <option value = "Phòng Sơn 2">Phòng Sơn 2</option>
                      <option value = "Phòng Sơn 3">Phòng Sơn 3</option> 
                  </select>
                  </div> 
                  <div class=" form-group  col-4" >
                    <label for="regular1" class="control-label">Loại SC</label>
                     <select id="LoaiSC" required class="form-control" >
                      <option value="DongSon">Đồng Sơn</option>
                      <option value = "Dong">Đồng ko Sơn</option>
                      <option value = "Son">Sơn Không Đồng</option>
                      <option value = "Pass">Pass</option> 
                  </select>
                  </div>
                </div> 
         <div class="form-row">
                  <div class=" form-group  col-6" style="display:none">
                    <label for="regular1" class="control-label">Ngày Bắt Đầu SC</label>
                    <input type="datetime-local" required class="form-control"id="NgayBDSC"  >
                  </div>
                  <div class=" form-group  col-6">  
                    <label class="control-label" for="NgayKTSC" >Ngày Giờ KT</label>
                    <input type="datetime-local" required min="2015-02-20 10:00:00" class="form-control" id="NgayKTSC" onchange="timeSuaChua()" required>
                  </div> 
                   <div class=" form-group  col-3">  
                    <label class="control-label" for="NgayKTSC" >Thời GSCĐ</label>
                    <input type="number" class="form-control" step="0.5" id="ThoiGSCD"  required>
                  </div>
                   <div class="form-group col-3">
                     <label class="control-label" for="NgayKTSC" >&nbsp</label>
                     <button  type="button" class="btn btn-primary me-2 form-control" onclick="LuuKeHoach()">L Hoạch</button>
                  </div>
                </div> 
               <div class="form-row ">
                   <div class="col-12">
                      <div class="slidecontainer">
                        <label class="control-label" for="NgayKTSC" >Thời Gian SCT</label>
                        <input style="width:100%" type="range" min="1" max="90" class="slider" id="myRangeBP">
                        <div class="row form-group col-12">
                        <div class="col-6">
                          <input type="number"   id="inputThoiGianBP"  class="form-control col-6 " onchange="GioKetThucBP()">
                        </div>
                        <div class="col-6">
                        <button  type="button" class="btn btn-primary me-2" onclick="CapNhatGioSC()">Đổi Giờ KT!</button>
                      </div> 
                      </div>
                   </div>
                </div>
                </div> 
   
                <div class="form-row">
                    <div class="  form-group col-6" style="display:none"> 
                      <label for="propeller-select">Trạng Thái</label>
                      <select id="TrangThaiDongSon" required class="form-control">
                        <option ></option>'
                        <option value="Chờ SC">Chờ SC</option>'
                        <option value="Chờ QC">Chờ QC</option>'
                        <option value="Chờ Pass">Chờ Pass</option>'
                        <option value="Chờ Lắp">Chờ Lắp</option>'
                        <option value="Chờ Sơn">Chờ Sơn</option>'
                        <option value="Dừng SC">Dừng SC</option>'
                        <option value="Đang SC">Đang SC</option>'
                        <option value="Đã SC">Đã SC</option>'
                      </select>
                    </div> 
                </div>              
               
             <div class="form-row">
                
                <div class="form-group col-6" style="display:none">
                  <label for="KhoangSuaChua">Biển Số Xe</label>
                  <input required class="form-control"  id="BienSoXe"  name="BienSoXe" disabled>
                </div> 
                <div class="form-group col-6" style="display:none">
                  <label for="Model">Model</label>
                  <select required class="form-control"  id="KieuXe"  name="KieuXe" list="listKieuXe" onchange="KieuXeChange()">
                    <option></option>
                  </select>
                </div> 
            </div> 
                <div class="form-row col-12">
                  
                  <div class=" form-group  col-6" style="display:none">  
                    <label class="control-label" for="KTVDS2" >Kỹ Thuật Viên 2</label>
                    <input type="text" class="form-control" required list="listTenNhanVien" id="KTVDS2">
                  </div>                   
                </div>
              <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups"> 
                <div class="col-6">
              <button  type="button" class="btn btn-danger me-2" onclick="DungCongviecBP()">Dừng Công Việc!</button>
              </div>
              <div class="col-6">
              <button type="button"id="bnt-ChoGiaoXe" style="float: right" class="btn btn-success" onclick="ChoGiaoXeBP()">Chờ Giao Xe</button>  
              </div>  
          </div>
                  
                    
              </div>
          </form>

          
  
  
	




        </div>
      </div>

        </div>


</div>
<footer class="w3-container w3-theme" style="padding:32px">
  <p>Footer information goes here</p>
</footer>
    </div>
</div>          
        
</div>
</div>
</div>     
<div class="modal fade" id="ModalDangKy" tabindex="-1" data-keyboard="false" data-backdrop="static" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <form autocomplete="off" id="FormDK">
             <div id="alertDK"><div class='alert alert-success'>Wellcome !!</div></div>
                </div> 
           <div class="form-row">
               <div class=" form-group  col-6" >
                  <label for="regular1" class="control-label">Biển Số Xe</label>
                 <input type="text" class="form-control" id="BienSoDK" name="BienSo"  placeholder="Biển Số" list="BienSoList" required style="font-weight:bold;" onkeyup="this.value = suabienso(this.value)">
                </div>
                 <div class=" form-group  col-6" >
                  <label for="regular1" class="control-label">Ngày Bắt Giao Xe</label>
                  <input type="datetime-local" required class="form-control"id="NgayGiaXeDK"  >
                </div>
                 <div class=" form-group  col-6" >
                  <label for="regular1" class="control-label">Cố Vấn</label>
                  <select type="datetime-local" required class="form-control"id="CoVanDK"  >
                   <option value ></option>
                    </select>
                </div> 
                <div class=" form-group  col-6" >
                  <label for="regular1" class="control-label">Nhóm Sơn</label>
                  <select type="datetime-local" required class="form-control"id="NhomSonDK"  >
                   <option ></option>'
                    </select>
                </div>
            </div> 
            <div class="col-6">
            <button type="button"id="bnt-DangKy" style="float: right" class="btn btn-success" >Đăng Ký</button>  
            </div>  
        </div>    
            </div>
        </form>        
      </div>

<script src="js/timelineBP.js"></script>
	<script src="js/background.js"></script>
	<script src="js/popper.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/mainBP.js"></script>
<script>
      checkdangnhap()
function checkdangnhap() {
  var urluser = "https://big-road-newsstand.glitch.me/User/"
  var password = localStorage.getItem("Password")
  var use =localStorage.getItem("id")
  document.getElementById("TrangDangNhap").hidden=true  
  if(password&&use){
    fetch(urluser+use)
    .then(response => response.json())
    .then(data =>{
    if(password==data.Password){
      document.getElementById("TrangDangNhap").hidden=false;
      document.getElementById("name").innerHTML =  localStorage.getItem("userName")}else{ 
        document.getElementById("TrangDangNhap").hidden=true 
        checkPhanQuyen() 
      }
  })
  }
}
function checkPhanQuyen(){
  var PhanQuyen =  localStorage.getItem("PhanQuyen");
  if(PhanQuyen=="KTVBP"){ document.getElementById("mySidebar").innerHTML =  '<a class="w3-bar-item w3-button"  href="Body.html">Đồng Sơn</a>'}
  //if(PhanQuyen=="KTVBP"){ document.getElementById("mySidebar").innerHTML =  '<a class="w3-bar-item w3-button"  href="Body.html">Đồng Sơn</a>'}
}
// Open and close the sidebar on medium and small screens
function w3_open() {
  document.getElementById("mySidebar").style.display = "block";
  document.getElementById("myOverlay").style.display = "block";
}

function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
  document.getElementById("myOverlay").style.display = "none";
}

// Change style of top container on scroll
window.onscroll = function() {myFunction()};
function myFunction() {
  if (document.body.scrollTop > 80 || document.documentElement.scrollTop > 80) {
    document.getElementById("myTop").classList.add("w3-card-4", "w3-animate-opacity");
    document.getElementById("myIntro").classList.add("w3-show-inline-block");
  } else {
    document.getElementById("myIntro").classList.remove("w3-show-inline-block");
    document.getElementById("myTop").classList.remove("w3-card-4", "w3-animate-opacity");
  }
}

// Accordions
function myAccordion(id) {
  var x = document.getElementById(id);
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
    x.previousElementSibling.className += " w3-theme";
  } else { 
    x.className = x.className.replace("w3-show", "");
    x.previousElementSibling.className = 
    x.previousElementSibling.className.replace(" w3-theme", "");
  }
}
</script>
     
</body>
</html> 
